<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.2.0
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MEV8VPW64E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-MEV8VPW64E');
  </script>
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Webscraping Mills Fleet Farm | Uneducated Technology</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="Webscraping Mills Fleet Farm" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Scraped 50,000 products before fear set in Hundo liner without redundant lines Runtime unknown. Def the longest so far. 3hrs when manually terminated. No end in site. Let scraper loose on entire site, crawling each category dynamically. Will limit scraper to 2 categories for price and discount alerts Ghost in the machine. Debug that thing! A reoccurring issue plagued this project. Extraneous and unknown prices occured for inaccurate products. This was due to the scraper seeing ‘suggested products’ in footer of url. These tiles have identical xpaths as normal product tiles. Additional, prices created off by one errors This issue lasted an embrassingly long amount of time" />
<meta property="og:description" content="Scraped 50,000 products before fear set in Hundo liner without redundant lines Runtime unknown. Def the longest so far. 3hrs when manually terminated. No end in site. Let scraper loose on entire site, crawling each category dynamically. Will limit scraper to 2 categories for price and discount alerts Ghost in the machine. Debug that thing! A reoccurring issue plagued this project. Extraneous and unknown prices occured for inaccurate products. This was due to the scraper seeing ‘suggested products’ in footer of url. These tiles have identical xpaths as normal product tiles. Additional, prices created off by one errors This issue lasted an embrassingly long amount of time" />
<link rel="canonical" href="https://onthefritzz.com/tu-da-max/" />
<meta property="og:url" content="https://onthefritzz.com/tu-da-max/" />
<meta property="og:site_name" content="Uneducated Technology" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-06-26T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Webscraping Mills Fleet Farm" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-26T00:00:00-05:00","datePublished":"2022-06-26T00:00:00-05:00","description":"Scraped 50,000 products before fear set in Hundo liner without redundant lines Runtime unknown. Def the longest so far. 3hrs when manually terminated. No end in site. Let scraper loose on entire site, crawling each category dynamically. Will limit scraper to 2 categories for price and discount alerts Ghost in the machine. Debug that thing! A reoccurring issue plagued this project. Extraneous and unknown prices occured for inaccurate products. This was due to the scraper seeing ‘suggested products’ in footer of url. These tiles have identical xpaths as normal product tiles. Additional, prices created off by one errors This issue lasted an embrassingly long amount of time","headline":"Webscraping Mills Fleet Farm","mainEntityOfPage":{"@type":"WebPage","@id":"https://onthefritzz.com/tu-da-max/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://onthefritzz.com/images/ij-logo-round.png"}},"url":"https://onthefritzz.com/tu-da-max/"}</script>
<!-- End Jekyll SEO tag -->


  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/skins/dark.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i|Lora:400,400i,700,700i">
  <link rel="alternate" type="application/atom+xml" title="Uneducated Technology" href="/feed.xml">
<!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

</head>


  <body class="layout--post  webscraping-mills-fleet-farm">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul><li><a href="/stats/">Stats</a></li><li><a href="/">Posts</a></li><li><a href="/tags/">Tags</a></li></ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
      <a href="/" class="site-logo" rel="home" title="Uneducated Technology">
        <img src="/images/ij-logo-round.png" class="site-logo-img animated fadeInDown" alt="Uneducated Technology">
      </a>
    
    
    
      
        <div class="site-title animated fadeIn"><a href="/">Uneducated Technology</a></div>
      
      <p class="site-description animated fadeIn" itemprop="description">Follow a meandering career in tech...</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article class="h-entry">
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title p-name">Webscraping Mills Fleet Farm
</h1>
        
      </header>

      <div class="page-sidebar">
        <div class="page-author h-card p-author"><div class="author-info"><ul class="author-links"><li class="author-link">
            <a class="u-url" rel="me" href=""><i class="fas fa-link fa-lg" title=""></i></a>
          </li></ul>
    <time class="page-date dt-published" datetime="2022-06-26T00:00:00-05:00"><a class="u-url" href="">June 26, 2022</a>
</time>

  </div>
</div>

        

        
  <h3 class="page-taxonomies-title">Tags</h3>
  
  <ul class="page-taxonomies"><li class="page-taxonomy">Python</li><li class="page-taxonomy">Scrapy</li><li class="page-taxonomy">Webscraping</li>
  </ul>


      </div>

      <div class="page-content">
        <div class="e-content">
          <ul>
  <li>Scraped 50,000 products before fear set in</li>
  <li>Hundo liner without redundant lines</li>
  <li>Runtime unknown. Def the longest so far. 3hrs when manually terminated. No end in site.</li>
  <li>Let scraper loose on entire site, crawling each category dynamically.
    <ul>
      <li>Will limit scraper to 2 categories for price and discount alerts</li>
    </ul>
  </li>
  <li>Ghost in the machine. Debug that thing!
    <ul>
      <li>A reoccurring issue plagued this project. Extraneous and unknown prices occured for inaccurate products.</li>
      <li>This was due to the scraper seeing ‘suggested products’ in footer of url.</li>
      <li>These tiles have identical xpaths as normal product tiles.</li>
      <li>Additional, prices created off by one errors</li>
      <li>This issue lasted an embrassingly long amount of time</li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">scrapy</span><span class="p">,</span> <span class="n">logging</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">csv</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">from</span> <span class="nn">scrapy.crawler</span> <span class="kn">import</span> <span class="n">CrawlerProcess</span>

<span class="n">csvName</span> <span class="o">=</span> <span class="s">'Mills-Output.csv'</span> 
<span class="n">errName</span> <span class="o">=</span> <span class="s">'Mills-Error.csv'</span>
<span class="n">tda</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Title'</span><span class="p">,</span> <span class="s">'Sub-Category'</span><span class="p">,</span> <span class="s">'Product-ID'</span><span class="p">,</span> <span class="s">'Product-SKU'</span><span class="p">,</span> <span class="s">'Regular-Price'</span><span class="p">,</span> <span class="s">'Sale-Price'</span><span class="p">,</span> <span class="s">'Sale'</span><span class="p">,</span> <span class="s">'Product-URL'</span><span class="p">,</span> <span class="s">'Category'</span><span class="p">,</span> <span class="s">'Images'</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">dataframeDiff</span><span class="p">(</span><span class="n">dframe</span><span class="p">):</span>
  <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">dframe</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'cp1252'</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
  <span class="n">df</span><span class="p">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s">'dataframe.csv'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">writeRow</span><span class="p">(</span><span class="n">cName</span><span class="p">,</span> <span class="n">ary</span><span class="p">):</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cName</span><span class="p">,</span> <span class="s">"a"</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
      <span class="n">csvWriter</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">writer</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
      <span class="n">csvWriter</span><span class="p">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">ary</span><span class="p">)</span>
  <span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">millsSpider</span><span class="p">(</span><span class="n">scrapy</span><span class="p">.</span><span class="n">Spider</span><span class="p">):</span>
  <span class="s">"""Mills Fleet Farm Price Crawler"""</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s">'mills-spider'</span>
  <span class="n">outputFolder</span> <span class="o">=</span> <span class="s">'database'</span>
  <span class="n">start_urls</span> <span class="o">=</span> <span class="p">[</span><span class="s">'https://www.fleetfarm.com'</span><span class="p">]</span>
  <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">'scrapy'</span><span class="p">).</span><span class="n">propagate</span> <span class="o">=</span> <span class="bp">False</span>
  <span class="n">itemsPerPage</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1">## Be Nice Here!
</span>  <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>

  <span class="k">def</span> <span class="nf">start_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># Recursively scrape cards from main department categories
</span>    <span class="n">allCategories</span> <span class="o">=</span> <span class="p">[</span><span class="s">'hunting/_/N-1096313067'</span><span class="p">,</span> <span class="s">'fishing/_/N-1191395697'</span><span class="p">,</span> <span class="s">'sports-outdoors/_/N-817546303'</span><span class="p">,</span>
            <span class="s">'tires-automotive/_/N-3033881547'</span><span class="p">,</span> <span class="s">'clothing-footwear/_/N-3941125009'</span><span class="p">,</span>
            <span class="s">'home/_/N-4001179884'</span><span class="p">,</span> <span class="s">'food-household/_/N-563764611'</span><span class="p">,</span> <span class="s">'toys/_/N-3859731678'</span><span class="p">,</span>
            <span class="s">'pets-wild-bird/_/N-2832316490'</span><span class="p">,</span> <span class="s">'lawn-garden/_/N-3059100830'</span><span class="p">,</span>
            <span class="s">'farm-livestock/_/N-1885444951'</span><span class="p">,</span> <span class="s">'home-improvement/_/N-3069115488'</span><span class="p">]</span>
    
    <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">allCategories</span><span class="p">:</span>
      <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">start_urls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s">/category/</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s">'</span>
      <span class="k">yield</span> <span class="n">scrapy</span><span class="p">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">getSubCategory</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">getSubCategory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span> <span class="c1"># Get subcategories. ie: Auto &gt; Tires/Accessories, Clothes &gt; Shoes
</span>    <span class="n">urlAry</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">url</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">'/'</span><span class="p">)[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s">'toys'</span><span class="p">:</span>
      <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">url</span><span class="si">}</span><span class="s">?null&amp;Nrpp=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">itemsPerPage</span><span class="si">}</span><span class="s">'</span>
      <span class="n">urlAry</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
      <span class="n">subCategories</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div[@class="section-content"]//ul[@class="promo-grid promo-static-stack-grid-five"]//li[@class="promo-tile "]//@href'</span><span class="p">).</span><span class="n">getall</span><span class="p">()</span>
      <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">start_urls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="n">cat</span><span class="si">}</span><span class="s">?null&amp;Nrpp=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">itemsPerPage</span><span class="si">}</span><span class="s">'</span> <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">subCategories</span><span class="p">]</span>
      <span class="p">[</span><span class="n">urlAry</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urlAry</span><span class="p">:</span>
      <span class="k">yield</span> <span class="n">scrapy</span><span class="p">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">getCards</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">getCards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">url</span><span class="si">}</span><span class="s">: Loading new subcategory...</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
    <span class="n">tiles</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div[@class="product-tile"]'</span><span class="p">)</span>
    <span class="n">productUrls</span> <span class="o">=</span> <span class="n">tiles</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div[@class="product-image"]//a/@href'</span><span class="p">).</span><span class="n">getall</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">productUrls</span><span class="p">:</span>
      <span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">';'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
      <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">start_urls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="n">url</span><span class="si">}</span><span class="s">'</span>
      <span class="k">yield</span> <span class="n">scrapy</span><span class="p">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">recursiveParse</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">recursiveParse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//h1[@class="product-name"]/text()'</span><span class="p">).</span><span class="n">get</span><span class="p">()</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">.</span><span class="n">strip</span><span class="p">().</span><span class="n">replace</span><span class="p">(</span><span class="s">'w/'</span><span class="p">,</span> <span class="s">''</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\t</span><span class="s">'</span><span class="p">,</span> <span class="s">''</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\'</span><span class="s">'</span><span class="p">,</span> <span class="s">''</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\\</span><span class="s">'</span><span class="p">,</span> <span class="s">''</span><span class="p">)</span>

    <span class="n">categry</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//section[@class="breadcrumbs"]//ul[@aria-label="breadcrumbs"]//a/text()'</span><span class="p">).</span><span class="n">getall</span><span class="p">()</span>  
    <span class="n">subcat</span> <span class="o">=</span> <span class="n">categry</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">categry</span> <span class="o">=</span> <span class="p">[</span><span class="s">'/'</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">categry</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">categry</span><span class="p">]</span>

    <span class="n">saleOrigPrice</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div[@class="product-price price"]//div[@class="original-price"]//span[@itemprop="price"]/text()'</span><span class="p">).</span><span class="n">get</span><span class="p">()</span>
    <span class="n">salePrice</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div[@class="product-price price"]//div[@class="sale-price"]//span[@id="regular-price"]/text()'</span><span class="p">).</span><span class="n">get</span><span class="p">()</span>
    <span class="n">regularPrice</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div[@class="product-price price"]//div[@class="regular-price"]//span[@id="regular-price"]/text()'</span><span class="p">).</span><span class="n">get</span><span class="p">()</span>
    
    <span class="n">imgs</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//img[@class="viewer-thumb-image"]/@src'</span><span class="p">).</span><span class="n">getall</span><span class="p">()</span><span class="c1">#//img[@class="viewer-thumb-image"]/@src').get()
</span>    <span class="n">imgs</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">start_urls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="n">img</span><span class="si">}</span><span class="s">'</span> <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">imgs</span><span class="p">]</span>

    <span class="n">productID</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div[@class="product-details"]//div[@class="product-number"]//span[@itemprop="productID"]/text()'</span><span class="p">).</span><span class="n">get</span><span class="p">()</span>
    <span class="n">productSKU</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div[@class="product-sku "]//span[@class="sku-number"]/text()'</span><span class="p">).</span><span class="n">get</span><span class="p">()</span>
    <span class="n">productURL</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">url</span>

    <span class="k">if</span> <span class="n">salePrice</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">salePrice</span> <span class="o">=</span> <span class="n">salePrice</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\t</span><span class="s">'</span><span class="p">,</span> <span class="s">''</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span> <span class="s">''</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\xa0</span><span class="s">CLEARANCE'</span><span class="p">,</span> <span class="s">'</span><span class="se">\xa0</span><span class="s">SALE'</span><span class="p">)</span>
      <span class="n">salePrice</span> <span class="o">=</span> <span class="n">salePrice</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="sa">f</span><span class="s">'</span><span class="se">\xa0</span><span class="s">SALE'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
      <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">title</span><span class="p">,</span> <span class="n">subcat</span><span class="p">,</span> <span class="n">productID</span><span class="p">,</span> <span class="n">productSKU</span><span class="p">,</span> <span class="n">saleOrigPrice</span><span class="p">,</span> <span class="n">salePrice</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="n">productURL</span><span class="p">,</span> <span class="n">categry</span><span class="p">,</span> <span class="n">imgs</span><span class="p">]</span>
    
    <span class="k">elif</span> <span class="n">salePrice</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
      <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">title</span><span class="p">,</span> <span class="n">subcat</span><span class="p">,</span> <span class="n">productID</span><span class="p">,</span> <span class="n">productSKU</span><span class="p">,</span> <span class="n">regularPrice</span><span class="p">,</span> <span class="s">'NaN'</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">productURL</span><span class="p">,</span> <span class="n">categry</span><span class="p">,</span> <span class="n">imgs</span><span class="p">]</span>

    <span class="bp">self</span><span class="p">.</span><span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">writeRow</span><span class="p">(</span><span class="n">csvName</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">'</span><span class="se">\n</span><span class="s">.:##| </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">counter</span><span class="si">}</span><span class="s"> |##:.</span><span class="se">\n</span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s">'</span><span class="p">)</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(.</span><span class="mi">2</span><span class="p">)</span>
  
  <span class="nb">open</span><span class="p">(</span><span class="n">csvName</span><span class="p">,</span> <span class="s">'w+'</span><span class="p">).</span><span class="n">close</span><span class="p">()</span>
  <span class="n">writeRow</span><span class="p">(</span><span class="n">csvName</span><span class="p">,</span> <span class="n">tda</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
  <span class="n">process</span> <span class="o">=</span> <span class="n">CrawlerProcess</span><span class="p">()</span>
  <span class="n">process</span><span class="p">.</span><span class="n">crawl</span><span class="p">(</span><span class="n">millsSpider</span><span class="p">)</span>
  <span class="n">process</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
  <span class="n">dataframeDiff</span><span class="p">(</span><span class="n">csvName</span><span class="p">)</span>
</code></pre></div></div>

        </div>

        
          <!--<div class="page-share">
  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fonthefritzz.com%2Ftu-da-max%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--facebook btn--small"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> <span>Share</span></a>
  <a href="https://twitter.com/intent/tweet?text=Webscraping+Mills+Fleet+Farm%20https%3A%2F%2Fonthefritzz.com%2Ftu-da-max%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--twitter btn--small"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> <span>Tweet</span></a>
  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fonthefritzz.com%2Ftu-da-max%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--linkedin btn--small"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> <span>LinkedIn</span></a>
  <a href="https://reddit.com/submit?title=Webscraping+Mills+Fleet+Farm&url=https%3A%2F%2Fonthefritzz.com%2Ftu-da-max%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--reddit btn--small"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i> <span>Reddit</span></a>
</div>-->

        

        

        <nav class="page-pagination" role="navigation">
  
    <a class="page-previous" href="/new-dt/">
      <h4 class="page-pagination-label">Previous</h4>
      <span class="page-pagination-title">
        <i class="fas fa-arrow-left"></i> Toyota of computers

      </span>
    </a>
  

  
    <a class="page-next" href="/tri-wing-thing/">
      <h4 class="page-pagination-label">Next</h4>
      <span class="page-pagination-title">
        Tri-Wing Ain’t No-Thing
 <i class="fas fa-arrow-right"></i>
      </span>
    </a>
  
</nav>

      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="copyright">
    
      <p>&copy; 2024 Uneducated Technology. <br> Powered by <a href="https://www.vultr.com/">Vultr</a>, <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> and <a href="https://mademistakes.com/"> mademistakes </a></p>
    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script><!---->


  </body>

</html>
